name: çƒ­æ¢—å®šæ—¶æŽ¨é€

on:
  schedule:
    # åŒ—äº¬æ—¶é—´ 09:00ï¼ˆUTC 01:00ï¼‰
    - cron: '0 1 * * *'
    # åŒ—äº¬æ—¶é—´ 15:00ï¼ˆUTC 07:00ï¼‰
    - cron: '0 7 * * *'
    # åŒ—äº¬æ—¶é—´ 18:00ï¼ˆUTC 10:00ï¼‰
    - cron: '0 10 * * *'
    # åŒ—äº¬æ—¶é—´ 23:59ï¼ˆUTC 15:59ï¼‰
    - cron: '59 15 * * *'

  workflow_dispatch:

jobs:
  meme_push:
    runs-on: ubuntu-latest

    steps:
      - name: è®¾ç½®PythonçŽ¯å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: å®‰è£…ä¾èµ–
        run: pip install requests

      - name: åˆ›å»ºæŽ¨é€è„šæœ¬
        run: |
          cat > push_meme.py << 'EOF'
      import requests
      import json
      from datetime import datetime

      webhook_url = "${{ secrets.WECHAT_WEBHOOK_URL }}"

      def send_message():
          today = datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')
          current_time = datetime.now().strftime('%H:%M')

          message = f"""## ðŸ“… {today} å…¨ç½‘çƒ­æ¢—æŽ¨é€ {current_time}

### ðŸ”¥ å¾®åšçƒ­æ¦œTOP3

**1. ä»Šæ—¥çƒ­æ¢—1**
ðŸ’¬ ç²¾é€‰è¯„è®ºï¼šå“ˆå“ˆå“ˆå“ˆå¤ªå¥½ç¬‘äº†
ðŸ”— [æŸ¥çœ‹è¯¦æƒ…](https://weibo.com/1) | ðŸ“‹ å¤åˆ¶é“¾æŽ¥ï¼š`https://weibo.com/1`

---

**2. ä»Šæ—¥çƒ­æ¢—2**
ðŸ’¬ ç²¾é€‰è¯„è®ºï¼šç¬‘æ­»æˆ‘äº†
ðŸ”— [æŸ¥çœ‹è¯¦æƒ…](https://weibo.com/2) | ðŸ“‹ å¤åˆ¶é“¾æŽ¥ï¼š`https://weibo.com/2`

---

**3. ä»Šæ—¥çƒ­æ¢—3**
ðŸ’¬ ç²¾é€‰è¯„è®ºï¼šå¤ªçœŸå®žäº†
ðŸ”— [æŸ¥çœ‹è¯¦æƒ…](https://weibo.com/3) | ðŸ“‹ å¤åˆ¶é“¾æŽ¥ï¼š`https://weibo.com/3`

---

### ðŸ”¥ å°çº¢ä¹¦çƒ­æ¦œTOP3

**4. ä»Šæ—¥çƒ­æ¢—4**
ðŸ’¬ ç²¾é€‰è¯„è®ºï¼šç»äº†
ðŸ”— [æŸ¥çœ‹è¯¦æƒ…](https://xiaohongshu.com/1) | ðŸ“‹ å¤åˆ¶é“¾æŽ¥ï¼š`https://xiaohongshu.com/1`

---

**5. ä»Šæ—¥çƒ­æ¢—5**
ðŸ’¬ ç²¾é€‰è¯„è®ºï¼šå®¶äººä»¬è°æ‡‚å•Š
ðŸ”— [æŸ¥çœ‹è¯¦æƒ…](https://xiaohongshu.com/2) | ðŸ“‹ å¤åˆ¶é“¾æŽ¥ï¼š`https://xiaohongshu.com/2`

---

**6. ä»Šæ—¥çƒ­æ¢—6**
ðŸ’¬ ç²¾é€‰è¯„è®ºï¼šç ´é˜²äº†
ðŸ”— [æŸ¥çœ‹è¯¦æƒ…](https://xiaohongshu.com/3) | ðŸ“‹ å¤åˆ¶é“¾æŽ¥ï¼š`https://xiaohongshu.com/3`

---

### ðŸ”¥ Bç«™çƒ­æ¦œTOP3

**7. ä»Šæ—¥çƒ­æ¢—7**
ðŸ’¬ ç²¾é€‰è¯„è®ºï¼šè¿™ä¹Ÿèƒ½è¡Œ
ðŸ”— [æŸ¥çœ‹è¯¦æƒ…](https://bilibili.com/1) | ðŸ“‹ å¤åˆ¶é“¾æŽ¥ï¼š`https://bilibili.com/1`

---

**8. ä»Šæ—¥çƒ­æ¢—8**
ðŸ’¬ ç²¾é€‰è¯„è®ºï¼šçœŸé¦™
ðŸ”— [æŸ¥çœ‹è¯¦æƒ…](https://bilibili.com/2) | ðŸ“‹ å¤åˆ¶é“¾æŽ¥ï¼š`https://bilibili.com/2`

---

**9. ä»Šæ—¥çƒ­æ¢—9**
ðŸ’¬ ç²¾é€‰è¯„è®ºï¼šæ‡‚äº†
ðŸ”— [æŸ¥çœ‹è¯¦æƒ…](https://bilibili.com/3) | ðŸ“‹ å¤åˆ¶é“¾æŽ¥ï¼š`https://bilibili.com/3`

---

### ðŸ”¥ æŠ–éŸ³çƒ­æ¦œTOP3

**10. ä»Šæ—¥çƒ­æ¢—10**
ðŸ’¬ ç²¾é€‰è¯„è®ºï¼šå¤ªä¸Šå¤´äº†
ðŸ”— [æŸ¥çœ‹è¯¦æƒ…](https://douyin.com/1) | ðŸ“‹ å¤åˆ¶é“¾æŽ¥ï¼š`https://douyin.com/1`

---

**11. ä»Šæ—¥çƒ­æ¢—11**
ðŸ’¬ ç²¾é€‰è¯„è®ºï¼šè°è¿˜ä¸æ˜¯ä¸ªå®å®
ðŸ”— [æŸ¥çœ‹è¯¦æƒ…](https://douyin.com/2) | ðŸ“‹ å¤åˆ¶é“¾æŽ¥ï¼š`https://douyin.com/2`

---

**12. ä»Šæ—¥çƒ­æ¢—12**
ðŸ’¬ ç²¾é€‰è¯„è®ºï¼šå¿«ä¹åŠ å€
ðŸ”— [æŸ¥çœ‹è¯¦æƒ…](https://douyin.com/3) | ðŸ“‹ å¤åˆ¶é“¾æŽ¥ï¼š`https://douyin.com/3`

---

âœ¨ GitHub Actionsè‡ªåŠ¨æŽ¨é€
      """

          data = {
              "msgtype": "markdown",
              "markdown": {"content": message}
          }

          response = requests.post(webhook_url, json=data)
          if response.json().get('errcode') == 0:
              print("âœ… æŽ¨é€æˆåŠŸï¼")
          else:
              print(f"âŒ æŽ¨é€å¤±è´¥ï¼š{response.json()}")
      send_message()
      EOF

      - name: æ‰§è¡ŒæŽ¨é€
        run: python push_meme.py
